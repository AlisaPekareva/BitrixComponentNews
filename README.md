# BitrixComponentNews

# BitrixComponentNews
Create new Component News_by_interests 

 1)Устанавливаем демовесию «1С-Битрикс: Управление сайтом»
редакции «Стандарт», решение «Корпоративный сайт производственной компании»
2)В административной части:
  1 Создание пользовательского свойства  для пользователей "тип автора" (UF_AUTHOR_TYPE) ;
  2 Создание трех пользователей test 1, test2, test3;
  3 Создание  группы пользователей и задаем значения для пользователей: группа 1 (admin, tes1,test2); группа 2 (test3);
  4 Добавляем три произвольных новости (три уже  существуют);
  5 в инфоблоке Новости добавляем множественное свойство АВТОР (AUTHOR_CODE);
  6 Присваиваем значение Автор для новостей согласно заданию;
  7 Создаём новый раздел "Новости по интересам", добавляем в левое меню и верхнее меню ;
 3) Перед написанием компонента  копируем системный компонент  из bitrix/components.news.list и используем его за основу. 
  Раработка ведется в папке local, раздел на сайте называется /news_by_interest/
  Решаемые задачи:
  Компонент должен выводить список авторов, рядом с автором – список его
новостей.
● Отображаются только те авторы, у которых тот же «тип» что и у текущего
пользователя.
● Новости, в которых в авторстве присутствует текущий пользователь, не
выводятся у других авторов.
● Неавторизованному пользователю данные не выводятся.
● Текущий пользователь и его новости – не выводятся.
● Большой объем данных не предполагается, лимиты на выборку и постраничная
навигация – не нужны.
● Используемые в шаблоне поля новостей: название, дата активности.
● Используемые в шаблоне поля пользователей: id, логин.

!ID инфоблока с новостями на тестовом сервере 1 (нужно поменять в файле index.php (нужна  замена на символьный код)

   Основная логика реализована в файле component.php : 
   
   Проверка на авторизацию :IsAuthorized())
   Тип текущего пользователя: $iCurUserType
   ПОлучение остальных с таким же типом как у пользователя  ,кроме него самого $resUsers
   Зависимость кэширования от пользователя startResultCache
   Отображение авторов ,У которых одинаковый тип как у пользователя $arParams["FIELD_AUTHOR_CODE"] => $iCurUserType,
   Получаем новости  принадлежащие пользователям такого же типа, кроме самого пользователя $resNews и пр.
   Заголовок страницы прописан также в component.php
     Использованы лэнговые файлы  с переводом.
   
   
